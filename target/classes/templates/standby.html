<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastel Photo Slider</title>
    <link rel="stylesheet" href="css/standby.css">
</head>

<body>
    <form id="redirect-form" action="oshome" method="get">
        <div class="slider-container">
            <div class="slider-frame" id="slider-frame"></div>
        </div>
    </form>

    <script>
        function getRandomPastelColor() {
            const r = Math.floor(Math.random() * 127 + 127);
            const g = Math.floor(Math.random() * 127 + 127);
            const b = Math.floor(Math.random() * 127 + 127);
            return `rgb(${r}, ${g}, ${b})`;0
        }

        document.addEventListener("DOMContentLoaded", function () {
            const sliderFrame = document.getElementById('slider-frame');

            // localStorage에서 선택된 이미지 가져오기
            const selectedImages = JSON.parse(localStorage.getItem('selectedImages') || '[]');

            // 이미지가 없으면 메시지 표시
            if (selectedImages.length === 0) {
                const noImagesMessage = document.createElement('div');
                noImagesMessage.textContent = '선택한 이미지가 없습니다.';
                noImagesMessage.style.color = '#fff';
                noImagesMessage.style.textAlign = 'center';
                noImagesMessage.style.width = '100%';
                noImagesMessage.style.fontSize = '24px';
                noImagesMessage.style.marginTop = '20px';
                sliderFrame.appendChild(noImagesMessage);
                return;
            }

            // 슬라이드 항목 생성
            selectedImages.forEach(imageUrl => {
                const slideElement = document.createElement('div');
                slideElement.className = 'slide';
                slideElement.style.backgroundColor = getRandomPastelColor(); // 랜덤 색상 적용

                const imgElement = document.createElement('img');
                imgElement.src = imageUrl;
                imgElement.alt = 'Selected Photo';

                const captionElement = document.createElement('p');
                captionElement.textContent = '#추억 사진'; // 텍스트를 원하는 대로 변경 가능

                slideElement.appendChild(imgElement);
                slideElement.appendChild(captionElement);
                sliderFrame.appendChild(slideElement);
            });

            // 복제된 슬라이드를 추가하여 무한 반복 효과를 구현
            selectedImages.forEach(imageUrl => {
                const slideElement = document.createElement('div');
                slideElement.className = 'slide';
                slideElement.style.backgroundColor = getRandomPastelColor(); // 랜덤 색상 적용

                const imgElement = document.createElement('img');
                imgElement.src = imageUrl;
                imgElement.alt = 'Selected Photo';

                const captionElement = document.createElement('p');
                captionElement.textContent = '#추억 사진'; // 텍스트를 원하는 대로 변경 가능

                slideElement.appendChild(imgElement);
                slideElement.appendChild(captionElement);
                sliderFrame.appendChild(slideElement);
            });

            function nextSlide() {
                sliderFrame.style.animation = 'none';
                sliderFrame.offsetHeight; // trigger reflow
                sliderFrame.style.animation = 'slide 15s linear infinite';
            }

            function prevSlide() {
                // 이전 슬라이드를 구현하려면 추가적인 논리가 필요합니다.
            }
        });

        // 전체 페이지 클릭 시 form 제출
        document.body.addEventListener('click', function () {
            document.getElementById('redirect-form').submit();
        });
    </script>
</body>

</html>